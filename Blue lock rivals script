-- ‚ö†Ô∏è Assicurati di usare questo solo in LocalScript (es: StarterPlayerScripts)
-- ‚ö†Ô∏è Script testato con Rayfield ufficiale

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local player = game.Players.LocalPlayer

-- DEBUG: Stampiamo tutto per trovare dove sono i valori
print("=== DEBUG INFO ===")
print("Player:", player.Name)

-- Cerchiamo PlayerStats in diverse posizioni
local stats = nil
local possibleLocations = {
    player:FindFirstChild("PlayerStats"),
    player:FindFirstChild("leaderstats"),
    player:FindFirstChild("Stats"),
    player.Character and player.Character:FindFirstChild("PlayerStats"),
    player.Character and player.Character:FindFirstChild("Stats"),
    game.Workspace:FindFirstChild(player.Name) and game.Workspace[player.Name]:FindFirstChild("PlayerStats")
}

for i, location in ipairs(possibleLocations) do
    if location then
        print("Trovato stats in posizione", i, ":", location:GetFullName())
        stats = location
        break
    end
end

if not stats then
    print("PlayerStats non trovato, cercando in tutte le posizioni...")
    -- Stampiamo tutti i figli del player
    print("Figli del Player:")
    for _, child in ipairs(player:GetChildren()) do
        print("-", child.Name, child.ClassName)
    end
    
    -- Stampiamo tutti i figli del character se esiste
    if player.Character then
        print("Figli del Character:")
        for _, child in ipairs(player.Character:GetChildren()) do
            print("-", child.Name, child.ClassName)
        end
    end
    
    -- Aspettiamo che appaia
    repeat
        wait(0.1)
        stats = player:FindFirstChild("PlayerStats") or player:FindFirstChild("leaderstats") or player:FindFirstChild("Stats")
    until stats
end

print("Stats trovato:", stats:GetFullName())
print("Contenuto di Stats:")
for _, child in ipairs(stats:GetChildren()) do
    print("-", child.Name, "=", child.Value, "(", child.ClassName, ")")
end
print("=== END DEBUG ===")

-- Aspetta che PlayerStats sia disponibile
if not stats then
    stats = player:WaitForChild("PlayerStats", 10) or player:WaitForChild("leaderstats", 10) or player:WaitForChild("Stats", 10)
end

-- Salva i valori originali
local originalValues = {
    Money = 0,
    Spins = 0,
    FlowSpins = 0
}

-- Funzione per salvare i valori originali
local function saveOriginalValues()
    local money = findStat("Money")
    local spins = findStat("Spins")
    local flowSpins = findStat("FlowSpins")
    
    if money then originalValues.Money = money.Value end
    if spins then originalValues.Spins = spins.Value end
    if flowSpins then originalValues.FlowSpins = flowSpins.Value end
end

-- Salva i valori all'avvio
saveOriginalValues()

-- Crea la finestra
local Window = Rayfield:CreateWindow({
    Name = "Blue Lock - Cheat Menu",
    LoadingTitle = "Caricamento Blue Lock Cheats...",
    LoadingSubtitle = "Sistema di Modifica Stats",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = "BlueLockCheats"
    },
    Discord = {
        Enabled = false
    },
    KeySystem = false
})

-- Crea il tab principale
local MainTab = Window:CreateTab("‚öôÔ∏è Stats Modifier", "settings")

-- Sezione Money
local MoneySection = MainTab:CreateSection("üí∞ Money")

-- Toggle per Money infinito
MainTab:CreateToggle({
    Name = "Unlimited Money",
    CurrentValue = false,
    Flag = "MoneyToggle",
    Callback = function(Value)
        local money = findStat("Money")
        if money then
            if Value then
                money.Value = 99999999
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üí∞ Unlimited Money ATTIVATO",
                    Duration = 3,
                    Image = "check"
                })
            else
                money.Value = originalValues.Money
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üí∞ Unlimited Money DISATTIVATO",
                    Duration = 3,
                    Image = "x"
                })
            end
        else
            Rayfield:Notify({
                Title = "Errore",
                Content = "‚ùå Money non trovato! Controlla la console per debug",
                Duration = 5,
                Image = "alert-triangle"
            })
        end
    end,
})

-- Slider per Money personalizzato
MainTab:CreateSlider({
    Name = "Custom Money Amount",
    Range = {0, 100000000},
    Increment = 1000,
    Suffix = "$",
    CurrentValue = 0,
    Flag = "MoneySlider",
    Callback = function(Value)
        local money = findStat("Money")
        if money then
            money.Value = Value
            Rayfield:Notify({
                Title = "Blue Lock",
                Content = "üí∞ Money impostato a: " .. Value,
                Duration = 2,
                Image = "dollar-sign"
            })
        end
    end,
})

-- Sezione Spins
local SpinSection = MainTab:CreateSection("üé∞ Spins")

-- Toggle per Spins infiniti
MainTab:CreateToggle({
    Name = "Unlimited Spins",
    CurrentValue = false,
    Flag = "SpinsToggle",
    Callback = function(Value)
        local spins = findStat("Spins")
        if spins then
            if Value then
                spins.Value = 999
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üé∞ Unlimited Spins ATTIVATO",
                    Duration = 3,
                    Image = "check"
                })
            else
                spins.Value = originalValues.Spins
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üé∞ Unlimited Spins DISATTIVATO",
                    Duration = 3,
                    Image = "x"
                })
            end
        else
            Rayfield:Notify({
                Title = "Errore",
                Content = "‚ùå Spins non trovato! Controlla la console per debug",
                Duration = 5,
                Image = "alert-triangle"
            })
        end
    end,
})

-- Slider per Spins personalizzati
MainTab:CreateSlider({
    Name = "Custom Spins Amount",
    Range = {0, 1000},
    Increment = 1,
    Suffix = " spins",
    CurrentValue = 0,
    Flag = "SpinsSlider",
    Callback = function(Value)
        local spins = findStat("Spins")
        if spins then
            spins.Value = Value
            Rayfield:Notify({
                Title = "Blue Lock",
                Content = "üé∞ Spins impostati a: " .. Value,
                Duration = 2,
                Image = "rotate-cw"
            })
        end
    end,
})

-- Sezione Flow Spins
local FlowSpinSection = MainTab:CreateSection("üåä Flow Spins")

-- Toggle per Flow Spins infiniti
MainTab:CreateToggle({
    Name = "Unlimited Flow Spins",
    CurrentValue = false,
    Flag = "FlowSpinsToggle",
    Callback = function(Value)
        local flowSpins = findStat("FlowSpins")
        if flowSpins then
            if Value then
                flowSpins.Value = 999
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üåä Unlimited Flow Spins ATTIVATO",
                    Duration = 3,
                    Image = "check"
                })
            else
                flowSpins.Value = originalValues.FlowSpins
                Rayfield:Notify({
                    Title = "Blue Lock",
                    Content = "üåä Unlimited Flow Spins DISATTIVATO",
                    Duration = 3,
                    Image = "x"
                })
            end
        else
            Rayfield:Notify({
                Title = "Errore",
                Content = "‚ùå FlowSpins non trovato! Controlla la console per debug",
                Duration = 5,
                Image = "alert-triangle"
            })
        end
    end,
})

-- Slider per Flow Spins personalizzati
MainTab:CreateSlider({
    Name = "Custom Flow Spins Amount",
    Range = {0, 1000},
    Increment = 1,
    Suffix = " flow spins",
    CurrentValue = 0,
    Flag = "FlowSpinsSlider",
    Callback = function(Value)
        local flowSpins = findStat("FlowSpins")
        if flowSpins then
            flowSpins.Value = Value
            Rayfield:Notify({
                Title = "Blue Lock",
                Content = "üåä Flow Spins impostati a: " .. Value,
                Duration = 2,
                Image = "waves"
            })
        end
    end,
})

-- Sezione Utilit√†
local UtilitySection = MainTab:CreateSection("üîß Utility")

-- Button per resettare tutto
MainTab:CreateButton({
    Name = "Reset All Values",
    Callback = function()
        -- Reset Money
        local money = findStat("Money")
        if money then money.Value = originalValues.Money end
        
        -- Reset Spins
        local spins = findStat("Spins")
        if spins then spins.Value = originalValues.Spins end
        
        -- Reset Flow Spins
        local flowSpins = findStat("FlowSpins")
        if flowSpins then flowSpins.Value = originalValues.FlowSpins end
        
        Rayfield:Notify({
            Title = "Blue Lock",
            Content = "üîÑ Tutti i valori sono stati resettati!",
            Duration = 3,
            Image = "refresh-cw"
        })
    end,
})

-- Button per info
MainTab:CreateButton({
    Name = "Show Current Stats",
    Callback = function()
        local money = findStat("Money")
        local spins = findStat("Spins")
        local flowSpins = findStat("FlowSpins")
        
        local moneyVal = money and money.Value or "N/A"
        local spinsVal = spins and spins.Value or "N/A"
        local flowSpinsVal = flowSpins and flowSpins.Value or "N/A"
        
        Rayfield:Notify({
            Title = "Current Stats",
            Content = "üí∞ Money: " .. moneyVal .. "\nüé∞ Spins: " .. spinsVal .. "\nüåä Flow: " .. flowSpinsVal,
            Duration = 5,
            Image = "info"
        })
    end,
})

-- Messaggio di benvenuto
Rayfield:Notify({
    Title = "Blue Lock Cheats",
    Content = "‚úÖ Script caricato con successo!",
    Duration = 4,
    Image = "check-circle"
})
